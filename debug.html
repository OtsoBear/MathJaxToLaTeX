<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MathJax to LaTeX Debug Page</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .success {
            color: green;
        }
        .failure {
            color: red;
        }
        pre {
            background-color: #f5f5f5;
            padding: 10px;
            border-radius: 3px;
            overflow-x: auto;
        }
        button {
            padding: 8px 16px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
            margin: 5px;
        }
    </style>
</head>
<body>
    <h1>MathJax to LaTeX Translator Debug Page</h1>
    
    <div class="section">
        <h2>Script Loading Status</h2>
        <div id="script-status">Checking...</div>
        <button id="check-scripts">Check Scripts</button>
    </div>
    
    <div class="section">
        <h2>Function Availability Test</h2>
        <div id="function-status">Click to check if functions are available</div>
        <button id="check-functions">Check Functions</button>
    </div>
    
    <div class="section">
        <h2>Translation Test</h2>
        <p>Test with a simple example: "V equals one third pi r squared h"</p>
        <div id="translation-result">Click to test translation</div>
        <button id="test-translation">Test Translation</button>
    </div>
    
    <div class="section">
        <h2>File Content Check</h2>
        <p>Use this to check if main.js has the correct content. Copy and paste the content of main.js below:</p>
        <textarea id="file-content" rows="10" style="width: 100%"></textarea>
        <div id="file-check-result"></div>
        <button id="check-file">Check File</button>
    </div>
    
    <script>
        // Try loading main.js again inline
        document.write('<script src="main.js"><\/script>');
        
        window.addEventListener('load', function() {
            // Script status check
            document.getElementById('check-scripts').addEventListener('click', function() {
                const scriptStatus = document.getElementById('script-status');
                
                // Check if scripts were loaded
                const mainScriptLoaded = typeof window.translateAriaToLatex === 'function';
                
                if (mainScriptLoaded) {
                    scriptStatus.innerHTML = '<span class="success">✓ main.js loaded successfully</span>';
                } else {
                    scriptStatus.innerHTML = '<span class="failure">✗ main.js failed to load correctly</span><br><span>Check that the file exists in the same directory as this HTML file.</span>';
                }
            });
            
            // Function availability check
            document.getElementById('check-functions').addEventListener('click', function() {
                const functionStatus = document.getElementById('function-status');
                let status = '<ul>';
                
                // Check for specific functions
                if (typeof window.translateAriaToLatex === 'function') {
                    status += '<li class="success">✓ translateAriaToLatex function is available</li>';
                } else {
                    status += '<li class="failure">✗ translateAriaToLatex function is NOT available</li>';
                }
                
                if (typeof window.fallbackTranslateText === 'function') {
                    status += '<li class="success">✓ fallbackTranslateText function is available</li>';
                } else {
                    status += '<li class="failure">✗ fallbackTranslateText function is NOT available (this is expected if not specifically exposed)</li>';
                }
                
                status += '</ul>';
                functionStatus.innerHTML = status;
            });
            
            // Translation test
            document.getElementById('test-translation').addEventListener('click', function() {
                const translationResult = document.getElementById('translation-result');
                
                if (typeof window.translateAriaToLatex === 'function') {
                    try {
                        const testText = "V equals one third pi r squared h";
                        const result = window.translateAriaToLatex(testText);
                        translationResult.innerHTML = `
                            <span class="success">✓ Translation successful</span><br>
                            <strong>Input:</strong> ${testText}<br>
                            <strong>Output:</strong> <pre>${result}</pre>
                        `;
                    } catch (e) {
                        translationResult.innerHTML = `
                            <span class="failure">✗ Translation error</span><br>
                            <pre>${e.toString()}</pre>
                        `;
                    }
                } else {
                    translationResult.innerHTML = '<span class="failure">✗ Cannot test translation because the function is not available</span>';
                }
            });
            
            // File content check
            document.getElementById('check-file').addEventListener('click', function() {
                const fileContent = document.getElementById('file-content').value;
                const checkResult = document.getElementById('file-check-result');
                
                if (!fileContent.trim()) {
                    checkResult.innerHTML = '<span class="failure">Please paste the content of main.js first</span>';
                    return;
                }
                
                let results = '<ul>';
                
                // Check for key parts
                if (fileContent.includes('window.translateAriaToLatex = translateAriaToLatex')) {
                    results += '<li class="success">✓ Function is correctly exported to window object</li>';
                } else {
                    results += '<li class="failure">✗ Function is not properly exported to window object</li>';
                }
                
                if (fileContent.includes('function translateAriaToLatex(')) {
                    results += '<li class="success">✓ Function declaration is present</li>';
                } else {
                    results += '<li class="failure">✗ Function declaration is missing</li>';
                }
                
                if (fileContent.includes('class MathExpressionParser')) {
                    results += '<li class="success">✓ Parser class is present</li>';
                } else {
                    results += '<li class="failure">✗ Parser class is missing</li>';
                }
                
                results += '</ul>';
                checkResult.innerHTML = results;
            });
        });
    </script>
</body>
</html>
